üöÄ N8N Production Deploy ‚Äî Timeweb Cloud

–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π + Docker + Nginx + HTTPS

‚∏ª

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

N8N/
‚îÇ
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ deploy.yml                 # CI/CD —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ GitHub Actions
‚îÇ
‚îú‚îÄ‚îÄ conf.d/
‚îÇ   ‚îî‚îÄ‚îÄ n8n.conf                   # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è Nginx (–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, HTTPS)
‚îÇ
‚îú‚îÄ‚îÄ .dockerignore                  # –§–∞–π–ª –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è Docker
‚îú‚îÄ‚îÄ docker-compose.yml             # –û—Å–Ω–æ–≤–Ω–æ–π Docker Compose –¥–ª—è n8n –∏ nginx
‚îú‚îÄ‚îÄ nginx.conf                     # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx
‚îî‚îÄ‚îÄ README.md                      # –≠—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞



‚∏ª

‚úÖ –ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
	1.	N8N –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
	‚Ä¢	–ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5678
	‚Ä¢	–ü—Ä–æ–±—Ä–æ—à–µ–Ω –≤ docker-compose: 5678:5678
	‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è HTTP-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.
	2.	Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏
	‚Ä¢	–°–ª—É—à–∞–µ—Ç 80/443 –ø–æ—Ä—Ç—ã.
	‚Ä¢	–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä n8n.
	‚Ä¢	–û—Ç–¥–∞–µ—Ç HTTPS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏–∑ /etc/letsencrypt.
	3.	–ê–≤—Ç–æ–¥–µ–ø–ª–æ–π –∏–∑ GitHub
	‚Ä¢	–ü—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
	‚Ä¢	–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ SSH –∫ —Å–µ—Ä–≤–µ—Ä—É.
	‚Ä¢	–ö–ª–æ–Ω–∏—Ä—É–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
	‚Ä¢	–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
	‚Ä¢	–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx.
	‚Ä¢	–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å https://n8n.portalgm.ru.
	‚Ä¢	–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

‚∏ª

‚öô –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:

üëâ nginx.conf

–ì–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx:

	‚Ä¢	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞–º–∏ –∏ –±—É—Ñ–µ—Ä–∞–º–∏.
	‚Ä¢	–ù–∞—Å—Ç—Ä–æ–π–∫–∏ gzip –∏ –ª–æ–≥–æ–≤.
	‚Ä¢	–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏–∑ conf.d/.

‚∏ª

üëâ conf.d/n8n.conf

–ö–æ–Ω—Ñ–∏–≥ –¥–ª—è —Ç–≤–æ–µ–≥–æ –¥–æ–º–µ–Ω–∞ n8n.portalgm.ru:

	‚Ä¢	–†–µ–¥–∏—Ä–µ–∫—Ç —Å http ‚Üí https.
	‚Ä¢	SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã.
	‚Ä¢	–ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ n8n:5678.
	‚Ä¢	–ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
	‚Ä¢	–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ (favicon, robots.txt).
	‚Ä¢	–ì–æ—Ç–æ–≤—ã–µ –±—É—Ñ–µ—Ä—ã –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.
	‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–æ–≤ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—à—å –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏).

‚∏ª

üëâ docker-compose.yml

–î–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

	‚Ä¢	n8n —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (SMTP, Webhook, BasicAuth –∏ –ø—Ä–æ—á–µ–µ).
	‚Ä¢	nginx —Å –ø—Ä–æ–±—Ä–æ—Å–æ–º –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤.

‚∏ª

üëâ .github/deploy.yml

GitHub Actions CI/CD:

	‚Ä¢	–û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
	‚Ä¢	–ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
	‚Ä¢	–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç nginx –∫–æ–Ω—Ñ–∏–≥.
	‚Ä¢	–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç nginx.
	‚Ä¢	–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞.
	‚Ä¢	–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

‚∏ª

üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ n8n:
	‚Ä¢	N8N_BASIC_AUTH_ACTIVE=true ‚Äî –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –±–∞–∑–æ–≤—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é.
	‚Ä¢	N8N_BASIC_AUTH_USER=admin ‚Äî –ª–æ–≥–∏–Ω.
	‚Ä¢	N8N_BASIC_AUTH_PASSWORD=... ‚Äî –ø–∞—Ä–æ–ª—å.
	‚Ä¢	SMTP-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º.
	‚Ä¢	WEBHOOK_URL=https://n8n.portalgm.ru/
	‚Ä¢	N8N_RUNNERS_ENABLED=true ‚Äî –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π n8n.

‚∏ª

üì° –ö–∞–∫ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å –Ω—É–ª—è:

git clone https://github.com/–¢–í–û–ô-–†–ï–ü–û.git ~/N8N
cd ~/N8N
docker-compose up --build -d

–ü—Ä–æ–≤–µ—Ä–∫–∞ nginx:

docker exec n8n_nginx_1 nginx -t
docker restart n8n_nginx_1

–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:

curl -I https://n8n.portalgm.ru



‚∏ª

üëÄ –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
	‚Ä¢	–õ–æ–≥–∏:

docker logs -f n8n_n8n_1
docker logs -f n8n_nginx_1


	‚Ä¢	–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

docker ps -a


	‚Ä¢	–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:

docker-compose down -v
docker-compose up -d --build


	‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ HTTPS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:

openssl x509 -in /etc/letsencrypt/live/n8n.portalgm.ru/fullchain.pem -noout -dates


	‚Ä¢	–û—á–∏—Å—Ç–∫–∞ Docker:

docker system prune -a



‚∏ª

üåü –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:
	‚Ä¢	–ü—Ä–æ–≤–µ—Ä—è–π:

docker logs -f n8n_nginx_1
docker exec n8n_nginx_1 nginx -t


	‚Ä¢	–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ nginx:

docker restart n8n_nginx_1


	‚Ä¢	–£–¥–æ—Å—Ç–æ–≤–µ—Ä—Å—è, —á—Ç–æ SSL —Å–≤–µ–∂–∏–π:

sudo certbot renew --nginx

